<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>rules_cc_autoconf</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">rules_cc_autoconf</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/periareon/rules_cc_autoconf" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rules_cc_autoconf"><a class="header" href="#rules_cc_autoconf">rules_cc_autoconf</a></h1>
<p>This module provides a rule to mimic <a href="https://www.gnu.org/software/autoconf/">GNU Autoconf</a>
functionality, allowing you to generate <code>config.h</code> files by running compilation checks against
a cc_toolchain.</p>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<pre><code class="language-python">bazel_dep(name = "rules_cc_autoconf", version = "{version}")
</code></pre>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>At a high level, Autoconf is a system for asking the C/C++ toolchain questions
like <em>“does this header exist?”</em>, <em>“is this function available?”</em> or <em>“what is
the size of this type?”</em> and then encoding the answers into a generated
<code>config.h</code>. Projects can then use preprocessor conditionals around those
defines instead of hard‑coding assumptions about the platform.</p>
<p><code>rules_cc_autoconf</code> brings this style of configuration into <strong>Bazel</strong>. Rather
than running <code>./configure</code> as an opaque shell script, you describe checks in
Starlark (via the <code>macros</code> module) and run them with the <code>autoconf</code> rule. The
rule talks directly to the Bazel C/C++ toolchain, so it respects things like
platforms, features, remote execution and sandboxing.</p>
<p>Running traditional Autoconf inside Bazel (for example with a <code>genrule</code> that
invokes <code>./configure</code>) tends to be brittle: it often assumes a POSIX shell,
mutates the source tree, and performs many unrelated checks in one big step.
That makes caching and debugging harder, and is awkward on non‑Unix platforms
or in remote execution environments.</p>
<p>In contrast, this rule generates a small JSON config for each <code>autoconf</code>
target and runs a dedicated C++ tool that executes <em>only</em> the checks you
requested. That gives you:</p>
<ul>
<li>granular actions that cache well and are easy to reason about</li>
<li>hermetic behaviour (no in‑tree <code>config.status</code>, <code>config.log</code>, etc.)</li>
<li>configuration that is driven by Bazel’s toolchain and platform selection</li>
</ul>
<p>The result is the same style of <code>config.h</code> you would expect from GNU Autoconf,
but integrated cleanly into Bazel builds.</p>
<h2 id="why-not-just-run-autoconf"><a class="header" href="#why-not-just-run-autoconf">Why not just run Autoconf?</a></h2>
<p>GNU <a href="https://www.gnu.org/software/autoconf/">Autoconf</a> is excellent at probing
platform capabilities and generating Make-based build trees. However, dropping
<code>./configure</code> into a Bazel build has a few downsides:</p>
<ul>
<li><strong>Non-hermetic</strong>: traditional Autoconf expects to mutate the source tree
(creating <code>config.status</code>, <code>config.log</code>, generated headers, etc.), which
conflicts with Bazel’s sandboxing and caching model.</li>
<li><strong>Opaque, coarse-grained actions</strong>: a single <code>configure</code> step can do dozens of
unrelated checks at once, making cache behaviour and debugging harder.</li>
<li><strong>Environment-sensitive</strong>: running shell scripts and toolchain discovery
inside a Bazel action is fragile across platforms, remote execution, and
containerized builds.</li>
</ul>
<p>Projects in the
<a href="https://github.com/bazelbuild/bazel-central-registry">Bazel Central Registry</a>
often reimplement the <em>build</em> logic in Bazel, but they still miss Autoconf’s
convenient <code>config.h</code> generation. <code>rules_cc_autoconf</code> focuses on that gap: it
provides autoconf-like checks in a hermetic, deterministic way, driven entirely
by Bazel’s C/C++ toolchain configuration.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rules"><a class="header" href="#rules">Rules</a></h1>
<ul>
<li><a href="./autoconf.html#autoconf">autoconf</a></li>
<li><a href="./autoconf_hdr.html#autoconf_hdr">autoconf_hdr</a></li>
<li><a href="./package_info.html#package_info">package_info</a></li>
<li><a href="./macros.html#macros">macros</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><!-- Generated with Stardoc: http://skydoc.bazel.build -->
<h1 id="autoconf"><a class="header" href="#autoconf">autoconf</a></h1>
<h2 id="rules-1"><a class="header" href="#rules-1">Rules</a></h2>
<ul>
<li><a href="autoconf.html#autoconf">autoconf</a></li>
</ul>
<p><a id="autoconf"></a></p>
<h2 id="autoconf-1"><a class="header" href="#autoconf-1">autoconf</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:autoconf.bzl", "autoconf")

autoconf(<a href="autoconf.html#autoconf-name">name</a>, <a href="autoconf.html#autoconf-deps">deps</a>, <a href="autoconf.html#autoconf-data">data</a>, <a href="autoconf.html#autoconf-checks">checks</a>)
</pre>
<p>Run autoconf-like checks and produce results.</p>
<p>This rule runs compilation checks against the configured cc_toolchain and produces
a JSON results file containing the check outcomes. Unlike <code>autoconf_hdr</code>, this rule
does not generate any header files - it only performs checks.</p>
<p>Example:</p>
<pre><code class="language-python">load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

autoconf(
    name = "config",
    checks = [
        macros.AC_CHECK_HEADER("stdio.h"),
        macros.AC_CHECK_HEADER("stdlib.h"),
        macros.AC_CHECK_FUNC("printf"),
    ],
)
</code></pre>
<p>The results can then be used by <code>autoconf_hdr</code> or <code>autoconf_srcs</code> to generate headers
or wrapped source files.</p>
<p><strong>ATTRIBUTES</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Type</th><th style="text-align: left">Mandatory</th><th style="text-align: left">Default</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="autoconf-name"></a>name</td><td style="text-align: left">A unique name for this target.</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels#target-names">Name</a></td><td style="text-align: left">required</td><td style="text-align: left"></td></tr>
<tr><td style="text-align: left"><a id="autoconf-deps"></a>deps</td><td style="text-align: left">Additional <code>autoconf</code> or <code>package_info</code> dependencies.</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels">List of labels</a></td><td style="text-align: left">optional</td><td style="text-align: left"><code>[]</code></td></tr>
<tr><td style="text-align: left"><a id="autoconf-data"></a>data</td><td style="text-align: left">Files referenced by checks (via the file parameter).</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels">List of labels</a></td><td style="text-align: left">optional</td><td style="text-align: left"><code>[]</code></td></tr>
<tr><td style="text-align: left"><a id="autoconf-checks"></a>checks</td><td style="text-align: left">List of JSON-encoded checks from macros (e.g., <code>macros.AC_CHECK_HEADER('stdio.h')</code>).</td><td style="text-align: left">List of strings</td><td style="text-align: left">optional</td><td style="text-align: left"><code>[]</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><!-- Generated with Stardoc: http://skydoc.bazel.build -->
<h1 id="autoconf_hdr"><a class="header" href="#autoconf_hdr">autoconf_hdr</a></h1>
<h2 id="rules-2"><a class="header" href="#rules-2">Rules</a></h2>
<ul>
<li><a href="autoconf_hdr.html#autoconf_hdr">autoconf_hdr</a></li>
</ul>
<p><a id="autoconf_hdr"></a></p>
<h2 id="autoconf_hdr-1"><a class="header" href="#autoconf_hdr-1">autoconf_hdr</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:autoconf_hdr.bzl", "autoconf_hdr")

autoconf_hdr(<a href="autoconf_hdr.html#autoconf_hdr-name">name</a>, <a href="autoconf_hdr.html#autoconf_hdr-deps">deps</a>, <a href="autoconf_hdr.html#autoconf_hdr-out">out</a>, <a href="autoconf_hdr.html#autoconf_hdr-inlines">inlines</a>, <a href="autoconf_hdr.html#autoconf_hdr-template">template</a>)
</pre>
<p>Generate configuration headers from results provided by <code>autoconf</code> targets.</p>
<p>This rule takes check results from <code>autoconf</code> targets (via <code>deps</code>) and generates a header file.
The template file (if provided) is used to format the output header.</p>
<p>Example:</p>
<pre><code class="language-python">load("@rules_cc_autoconf//autoconf:autoconf.bzl", "autoconf")
load("@rules_cc_autoconf//autoconf:autoconf_hdr.bzl", "autoconf_hdr")
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

autoconf(
    name = "config_checks",
    checks = [
        macros.AC_CHECK_HEADER("stdio.h"),
        macros.AC_CHECK_HEADER("stdlib.h"),
        macros.AC_CHECK_FUNC("printf"),
    ],
)

autoconf_hdr(
    name = "config",
    out = "config.h",
    deps = [":config_checks"],
    template = "config.h.in",
)
</code></pre>
<p>This allows you to run checks once and generate multiple header files from the same results.</p>
<p><strong>ATTRIBUTES</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Type</th><th style="text-align: left">Mandatory</th><th style="text-align: left">Default</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="autoconf_hdr-name"></a>name</td><td style="text-align: left">A unique name for this target.</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels#target-names">Name</a></td><td style="text-align: left">required</td><td style="text-align: left"></td></tr>
<tr><td style="text-align: left"><a id="autoconf_hdr-deps"></a>deps</td><td style="text-align: left">List of <code>autoconf</code> targets which provide check results. Results from all deps will be merged together, and duplicate define names will produce an error. If not provided, an empty results file will be created.</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels">List of labels</a></td><td style="text-align: left">optional</td><td style="text-align: left"><code>[]</code></td></tr>
<tr><td style="text-align: left"><a id="autoconf_hdr-out"></a>out</td><td style="text-align: left">The output config file (typically <code>config.h</code>).</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels">Label</a>; <a href="https://bazel.build/reference/be/common-definitions#configurable-attributes">nonconfigurable</a></td><td style="text-align: left">required</td><td style="text-align: left"></td></tr>
<tr><td style="text-align: left"><a id="autoconf_hdr-inlines"></a>inlines</td><td style="text-align: left">A mapping of strings to files for replace within the content of the given <code>template</code> attribute.<br><br>The exact string in the template is replaced with the content of the associated file. Any <code>@VAR@</code> style placeholders in the inline file content will be replaced with their corresponding define values (package info, check results, etc.) after insertion.</td><td style="text-align: left">Dictionary: String -&gt; Label</td><td style="text-align: left">optional</td><td style="text-align: left"><code>{}</code></td></tr>
<tr><td style="text-align: left"><a id="autoconf_hdr-template"></a>template</td><td style="text-align: left">Template file (<code>config.h.in</code>) to use as base for generating the header file. The template is used to format the output header, but does not generate any checks.</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels">Label</a></td><td style="text-align: left">required</td><td style="text-align: left"></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><!-- Generated with Stardoc: http://skydoc.bazel.build -->
<h1 id="autoconf_srcs"><a class="header" href="#autoconf_srcs">autoconf_srcs</a></h1>
<h2 id="rules-3"><a class="header" href="#rules-3">Rules</a></h2>
<ul>
<li><a href="autoconf_srcs.html#autoconf_srcs">autoconf_srcs</a></li>
</ul>
<p><a id="autoconf_srcs"></a></p>
<h2 id="autoconf_srcs-1"><a class="header" href="#autoconf_srcs-1">autoconf_srcs</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:autoconf_srcs.bzl", "autoconf_srcs")

autoconf_srcs(<a href="autoconf_srcs.html#autoconf_srcs-name">name</a>, <a href="autoconf_srcs.html#autoconf_srcs-deps">deps</a>, <a href="autoconf_srcs.html#autoconf_srcs-srcs">srcs</a>, <a href="autoconf_srcs.html#autoconf_srcs-naming">naming</a>)
</pre>
<p>Generate wrapper sources that are conditionally enabled by autoconf results.</p>
<p>Typical use case:</p>
<pre><code class="language-python">load("@rules_cc_autoconf//autoconf:autoconf_srcs.bzl", "autoconf_srcs")
load("@rules_cc_autoconf//autoconf:autoconf.bzl", "autoconf")
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")
load("@rules_cc//cc:cc_library.bzl", "cc_library")

autoconf(
    name = "config",
    out = "config.h",
    checks = [
        # Feature is present on this platform/toolchain.
        macros.AC_CHECK_HEADER("foo.h", define = "HAVE_FOO"),
    ],
)

autoconf_srcs(
    name = "foo_srcs",
    deps = [":config"],
    srcs = {
        "uses_foo.c": "HAVE_FOO",
    },
)

cc_library(
    name = "foo",
    srcs = [":foo_srcs"],
    hdrs = [":config.h"],
)
</code></pre>
<p>In this setup <code>autoconf_srcs</code> reads the results from <code>:config</code> (or multiple targets via <code>deps</code>) and generates a
wrapped copy of <code>uses_foo.c</code> whose contents are effectively:</p>
<pre><code class="language-cc">#define HAVE_FOO 1      // when the check for HAVE_FOO succeeds
/* or: #undef HAVE_FOO  // when the check fails */
#ifdef HAVE_FOO
/* original uses_foo.c contents ... */
#endif
</code></pre>
<p>This is useful when you have platform-specific or optional sources that should
only be compiled when a particular autoconf check passes, without having to
manually maintain <code>#ifdef</code> guards in every source file.</p>
<p><strong>ATTRIBUTES</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Type</th><th style="text-align: left">Mandatory</th><th style="text-align: left">Default</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="autoconf_srcs-name"></a>name</td><td style="text-align: left">A unique name for this target.</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels#target-names">Name</a></td><td style="text-align: left">required</td><td style="text-align: left"></td></tr>
<tr><td style="text-align: left"><a id="autoconf_srcs-deps"></a>deps</td><td style="text-align: left">List of <code>autoconf</code> targets which provide defines. Results from all deps will be merged together, and duplicate define names will produce an error.</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels">List of labels</a></td><td style="text-align: left">required</td><td style="text-align: left"></td></tr>
<tr><td style="text-align: left"><a id="autoconf_srcs-srcs"></a>srcs</td><td style="text-align: left">A mapping of source file to define required to compile the file.</td><td style="text-align: left"><a href="https://bazel.build/rules/lib/dict">Dictionary: Label -&gt; String</a></td><td style="text-align: left">required</td><td style="text-align: left"></td></tr>
<tr><td style="text-align: left"><a id="autoconf_srcs-naming"></a>naming</td><td style="text-align: left">How to name generated sources: <code>package_relative</code> keeps the original package-relative path, <code>ac_suffix</code> inserts <code>.ac.</code> before the final suffix (e.g. <code>foo.cc -&gt; foo.ac.cc</code>), and <code>per_target</code> prefixes outputs with <code>{ctx.label.name}</code> to namespace them per rule.</td><td style="text-align: left">String</td><td style="text-align: left">optional</td><td style="text-align: left"><code>"package_relative"</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><!-- Generated with Stardoc: http://skydoc.bazel.build -->
<h1 id="macros"><a class="header" href="#macros">macros</a></h1>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<ul>
<li><a href="macros.html#macros.AC_CHECK_ALIGNOF">macros.AC_CHECK_ALIGNOF</a></li>
<li><a href="macros.html#macros.AC_CHECK_CXX_COMPILER_FLAG">macros.AC_CHECK_CXX_COMPILER_FLAG</a></li>
<li><a href="macros.html#macros.AC_CHECK_C_COMPILER_FLAG">macros.AC_CHECK_C_COMPILER_FLAG</a></li>
<li><a href="macros.html#macros.AC_CHECK_DECL">macros.AC_CHECK_DECL</a></li>
<li><a href="macros.html#macros.AC_CHECK_FUNC">macros.AC_CHECK_FUNC</a></li>
<li><a href="macros.html#macros.AC_CHECK_HEADER">macros.AC_CHECK_HEADER</a></li>
<li><a href="macros.html#macros.AC_CHECK_LIB">macros.AC_CHECK_LIB</a></li>
<li><a href="macros.html#macros.AC_CHECK_MEMBER">macros.AC_CHECK_MEMBER</a></li>
<li><a href="macros.html#macros.AC_CHECK_SIZEOF">macros.AC_CHECK_SIZEOF</a></li>
<li><a href="macros.html#macros.AC_CHECK_SYMBOL">macros.AC_CHECK_SYMBOL</a></li>
<li><a href="macros.html#macros.AC_CHECK_TYPE">macros.AC_CHECK_TYPE</a></li>
<li><a href="macros.html#macros.AC_COMPUTE_INT">macros.AC_COMPUTE_INT</a></li>
<li><a href="macros.html#macros.AC_C_BIGENDIAN">macros.AC_C_BIGENDIAN</a></li>
<li><a href="macros.html#macros.AC_C_INLINE">macros.AC_C_INLINE</a></li>
<li><a href="macros.html#macros.AC_C_RESTRICT">macros.AC_C_RESTRICT</a></li>
<li><a href="macros.html#macros.AC_DEFINE">macros.AC_DEFINE</a></li>
<li><a href="macros.html#macros.AC_PROG_CC">macros.AC_PROG_CC</a></li>
<li><a href="macros.html#macros.AC_PROG_CC_C_O">macros.AC_PROG_CC_C_O</a></li>
<li><a href="macros.html#macros.AC_PROG_CXX">macros.AC_PROG_CXX</a></li>
<li><a href="macros.html#macros.AC_TRY_COMPILE">macros.AC_TRY_COMPILE</a></li>
<li><a href="macros.html#macros.M4_DEFINE">macros.M4_DEFINE</a></li>
</ul>
<p><a id="macros.AC_CHECK_ALIGNOF"></a></p>
<h2 id="macrosac_check_alignof"><a class="header" href="#macrosac_check_alignof">macros.AC_CHECK_ALIGNOF</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_ALIGNOF(<a href="macros.html#macros.AC_CHECK_ALIGNOF-type_name">type_name</a>, *, <a href="macros.html#macros.AC_CHECK_ALIGNOF-define">define</a>, <a href="macros.html#macros.AC_CHECK_ALIGNOF-headers">headers</a>, <a href="macros.html#macros.AC_CHECK_ALIGNOF-language">language</a>, <a href="macros.html#macros.AC_CHECK_ALIGNOF-requires">requires</a>)
</pre>
<p>Check the alignment of a type.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_ALIGNOF([int])
AC_CHECK_ALIGNOF([double], [[#include &lt;stddef.h&gt;]])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_ALIGNOF("int")
macros.AC_CHECK_ALIGNOF("double", headers = ["stddef.h"])
macros.AC_CHECK_ALIGNOF("FILE", requires = ["HAVE_STDIO_H"])
</code></pre>
<p>Cross-Compile Warning:
This macro is NOT cross-compile friendly. It requires compiling and
running code to determine the alignment, which doesn't work when cross-compiling.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_ALIGNOF-type_name"></a>type_name</td><td style="text-align: left">Name of the type</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_ALIGNOF-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>ALIGNOF_&lt;TYPE&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_ALIGNOF-headers"></a>headers</td><td style="text-align: left">Optional list of headers to include</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_ALIGNOF-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_ALIGNOF-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_CXX_COMPILER_FLAG"></a></p>
<h2 id="macrosac_check_cxx_compiler_flag"><a class="header" href="#macrosac_check_cxx_compiler_flag">macros.AC_CHECK_CXX_COMPILER_FLAG</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_CXX_COMPILER_FLAG(<a href="macros.html#macros.AC_CHECK_CXX_COMPILER_FLAG-flag">flag</a>, <a href="macros.html#macros.AC_CHECK_CXX_COMPILER_FLAG-define">define</a>, <a href="macros.html#macros.AC_CHECK_CXX_COMPILER_FLAG-language">language</a>, <a href="macros.html#macros.AC_CHECK_CXX_COMPILER_FLAG-requires">requires</a>)
</pre>
<p>Check if the C++ compiler supports a specific flag.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_CXX_COMPILER_FLAG([-std=c++17], [CXXFLAGS="$CXXFLAGS -std=c++17"])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_CXX_COMPILER_FLAG("-std=c++17")
macros.AC_CHECK_CXX_COMPILER_FLAG("-Wall", define = "HAVE_WALL_FLAG")
macros.AC_CHECK_CXX_COMPILER_FLAG("-Werror", requires = ["HAVE_CXX_COMPILER"])
</code></pre>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_CXX_COMPILER_FLAG-flag"></a>flag</td><td style="text-align: left">Compiler flag to test (e.g., <code>"-Wall"</code>, <code>"-std=c++17"</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_CXX_COMPILER_FLAG-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>HAVE_FLAG_&lt;FLAG&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_CXX_COMPILER_FLAG-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"cpp"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_CXX_COMPILER_FLAG-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_C_COMPILER_FLAG"></a></p>
<h2 id="macrosac_check_c_compiler_flag"><a class="header" href="#macrosac_check_c_compiler_flag">macros.AC_CHECK_C_COMPILER_FLAG</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_C_COMPILER_FLAG(<a href="macros.html#macros.AC_CHECK_C_COMPILER_FLAG-flag">flag</a>, <a href="macros.html#macros.AC_CHECK_C_COMPILER_FLAG-define">define</a>, <a href="macros.html#macros.AC_CHECK_C_COMPILER_FLAG-language">language</a>, <a href="macros.html#macros.AC_CHECK_C_COMPILER_FLAG-requires">requires</a>)
</pre>
<p>Check if the C compiler supports a specific flag.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_C_COMPILER_FLAG([-Wall], [CFLAGS="$CFLAGS -Wall"])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_C_COMPILER_FLAG("-Wall")
macros.AC_CHECK_C_COMPILER_FLAG("-std=c99", define = "HAVE_STD_C99")
macros.AC_CHECK_C_COMPILER_FLAG("-Werror", requires = ["HAVE_C_COMPILER"])
</code></pre>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_C_COMPILER_FLAG-flag"></a>flag</td><td style="text-align: left">Compiler flag to test (e.g., <code>"-Wall"</code>, <code>"-std=c99"</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_C_COMPILER_FLAG-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>HAVE_FLAG_&lt;FLAG&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_C_COMPILER_FLAG-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_C_COMPILER_FLAG-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_DECL"></a></p>
<h2 id="macrosac_check_decl"><a class="header" href="#macrosac_check_decl">macros.AC_CHECK_DECL</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_DECL(<a href="macros.html#macros.AC_CHECK_DECL-symbol">symbol</a>, *, <a href="macros.html#macros.AC_CHECK_DECL-define">define</a>, <a href="macros.html#macros.AC_CHECK_DECL-headers">headers</a>, <a href="macros.html#macros.AC_CHECK_DECL-value">value</a>, <a href="macros.html#macros.AC_CHECK_DECL-language">language</a>, <a href="macros.html#macros.AC_CHECK_DECL-requires">requires</a>)
</pre>
<p>Check if a symbol is declared.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_DECL([NULL], [AC_DEFINE([HAVE_DECL_NULL], [1])], [], [[#include &lt;stddef.h&gt;]])
AC_CHECK_DECL([stdout], [AC_DEFINE([HAVE_DECL_STDOUT], [1])], [], [[#include &lt;stdio.h&gt;]])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_DECL("NULL", headers = ["stddef.h"])
macros.AC_CHECK_DECL("stdout", headers = ["stdio.h"])
macros.AC_CHECK_DECL("EOF", requires = ["HAVE_STDIO_H"])
</code></pre>
<p>Note:
This is different from <code>AC_CHECK_SYMBOL</code> - it checks if something is
declared (not just <code>#defined</code>).</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_DECL-symbol"></a>symbol</td><td style="text-align: left">Name of the symbol to check</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_DECL-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>HAVE_DECL_&lt;SYMBOL&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_DECL-headers"></a>headers</td><td style="text-align: left">Optional list of headers to include</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_DECL-value"></a>value</td><td style="text-align: left">Optional value to assign when the check is True.</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_DECL-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_DECL-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_FUNC"></a></p>
<h2 id="macrosac_check_func"><a class="header" href="#macrosac_check_func">macros.AC_CHECK_FUNC</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_FUNC(<a href="macros.html#macros.AC_CHECK_FUNC-function">function</a>, <a href="macros.html#macros.AC_CHECK_FUNC-define">define</a>, <a href="macros.html#macros.AC_CHECK_FUNC-code">code</a>, <a href="macros.html#macros.AC_CHECK_FUNC-file">file</a>, <a href="macros.html#macros.AC_CHECK_FUNC-language">language</a>, <a href="macros.html#macros.AC_CHECK_FUNC-requires">requires</a>)
</pre>
<p>Check for a function.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_FUNC([malloc])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_FUNC("malloc")
macros.AC_CHECK_FUNC("printf", define = "HAVE_PRINTF")
macros.AC_CHECK_FUNC("fopen", requires = ["HAVE_STDIO_H"])
</code></pre>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_FUNC-function"></a>function</td><td style="text-align: left">Name of the function (e.g., <code>"printf"</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_FUNC-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>HAVE_&lt;FUNCTION&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_FUNC-code"></a>code</td><td style="text-align: left">Custom code to compile (optional)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_FUNC-file"></a>file</td><td style="text-align: left">Label to a file containing custom code (optional)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_FUNC-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_FUNC-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_HEADER"></a></p>
<h2 id="macrosac_check_header"><a class="header" href="#macrosac_check_header">macros.AC_CHECK_HEADER</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_HEADER(<a href="macros.html#macros.AC_CHECK_HEADER-header">header</a>, <a href="macros.html#macros.AC_CHECK_HEADER-define">define</a>, <a href="macros.html#macros.AC_CHECK_HEADER-language">language</a>, <a href="macros.html#macros.AC_CHECK_HEADER-requires">requires</a>)
</pre>
<p>Check for a header file.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_HEADER([stdio.h])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_HEADER("stdio.h")
macros.AC_CHECK_HEADER("sys/stat.h", define = "HAVE_SYS_STAT_H")
macros.AC_CHECK_HEADER("sys/types.h", requires = ["HAVE_STDIO_H"])
</code></pre>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_HEADER-header"></a>header</td><td style="text-align: left">Name of the header file (e.g., <code>"stdio.h"</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_HEADER-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>HAVE_&lt;HEADER&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_HEADER-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_HEADER-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_LIB"></a></p>
<h2 id="macrosac_check_lib"><a class="header" href="#macrosac_check_lib">macros.AC_CHECK_LIB</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_LIB(<a href="macros.html#macros.AC_CHECK_LIB-library">library</a>, <a href="macros.html#macros.AC_CHECK_LIB-function">function</a>, *, <a href="macros.html#macros.AC_CHECK_LIB-define">define</a>, <a href="macros.html#macros.AC_CHECK_LIB-code">code</a>, <a href="macros.html#macros.AC_CHECK_LIB-file">file</a>, <a href="macros.html#macros.AC_CHECK_LIB-language">language</a>, <a href="macros.html#macros.AC_CHECK_LIB-requires">requires</a>)
</pre>
<p>Check for a function in a library.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_LIB([m], [cos])
AC_CHECK_LIB([pthread], [pthread_create])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_LIB("m", "cos")
macros.AC_CHECK_LIB("pthread", "pthread_create", define = "HAVE_LIBPTHREAD")
macros.AC_CHECK_LIB("m", "sqrt", requires = ["HAVE_MATH_H"])
</code></pre>
<p>Note:
This checks if the specified function is available in the given library.
It attempts to link against <code>-l&lt;library&gt;</code> to verify the library provides
the function.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_LIB-library"></a>library</td><td style="text-align: left">Library name without the <code>-l</code> prefix (e.g., <code>"m"</code>, <code>"pthread"</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_LIB-function"></a>function</td><td style="text-align: left">Function name to check for in the library (e.g., <code>"cos"</code>, <code>"pthread_create"</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_LIB-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>HAVE_LIB&lt;LIBRARY&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_LIB-code"></a>code</td><td style="text-align: left">Custom code to compile and link (optional)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_LIB-file"></a>file</td><td style="text-align: left">Label to a file containing custom code (optional)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_LIB-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_LIB-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_MEMBER"></a></p>
<h2 id="macrosac_check_member"><a class="header" href="#macrosac_check_member">macros.AC_CHECK_MEMBER</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_MEMBER(<a href="macros.html#macros.AC_CHECK_MEMBER-aggregate">aggregate</a>, <a href="macros.html#macros.AC_CHECK_MEMBER-member">member</a>, *, <a href="macros.html#macros.AC_CHECK_MEMBER-define">define</a>, <a href="macros.html#macros.AC_CHECK_MEMBER-headers">headers</a>, <a href="macros.html#macros.AC_CHECK_MEMBER-language">language</a>, <a href="macros.html#macros.AC_CHECK_MEMBER-requires">requires</a>)
</pre>
<p>Check if a struct or union has a member.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_MEMBER([struct stat.st_rdev], [AC_DEFINE([HAVE_STRUCT_STAT_ST_RDEV], [1])], [], [[#include &lt;sys/stat.h&gt;]])
AC_CHECK_MEMBER([struct tm.tm_zone], [AC_DEFINE([HAVE_STRUCT_TM_TM_ZONE], [1])], [], [[#include &lt;time.h&gt;]])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_MEMBER("struct stat", "st_rdev", headers = ["sys/stat.h"])
macros.AC_CHECK_MEMBER("struct tm", "tm_zone", headers = ["time.h"])
macros.AC_CHECK_MEMBER("struct stat", "st_size", requires = ["HAVE_SYS_STAT_H"])
</code></pre>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_MEMBER-aggregate"></a>aggregate</td><td style="text-align: left">Struct or union name (e.g., <code>struct stat</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_MEMBER-member"></a>member</td><td style="text-align: left">Member name (e.g., <code>st_rdev</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_MEMBER-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>HAVE_&lt;AGGREGATE&gt;_&lt;MEMBER&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_MEMBER-headers"></a>headers</td><td style="text-align: left">Optional list of headers to include</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_MEMBER-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_MEMBER-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_SIZEOF"></a></p>
<h2 id="macrosac_check_sizeof"><a class="header" href="#macrosac_check_sizeof">macros.AC_CHECK_SIZEOF</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_SIZEOF(<a href="macros.html#macros.AC_CHECK_SIZEOF-type_name">type_name</a>, *, <a href="macros.html#macros.AC_CHECK_SIZEOF-define">define</a>, <a href="macros.html#macros.AC_CHECK_SIZEOF-headers">headers</a>, <a href="macros.html#macros.AC_CHECK_SIZEOF-language">language</a>, <a href="macros.html#macros.AC_CHECK_SIZEOF-requires">requires</a>)
</pre>
<p>Check the size of a type.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_SIZEOF([int])
AC_CHECK_SIZEOF([size_t], [], [[#include &lt;stddef.h&gt;]])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_SIZEOF("int")
macros.AC_CHECK_SIZEOF("size_t", headers = ["stddef.h"])
macros.AC_CHECK_SIZEOF("FILE", requires = ["HAVE_STDIO_H"])
</code></pre>
<p>Cross-Compile Warning:
This macro is NOT cross-compile friendly. It requires compiling and
running code to determine the size, which doesn't work when cross-compiling.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SIZEOF-type_name"></a>type_name</td><td style="text-align: left">Name of the type (e.g., <code>int</code>, <code>size_t</code>, <code>void*</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SIZEOF-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>SIZEOF_&lt;TYPE&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SIZEOF-headers"></a>headers</td><td style="text-align: left">Optional list of headers to include</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SIZEOF-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SIZEOF-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_SYMBOL"></a></p>
<h2 id="macrosac_check_symbol"><a class="header" href="#macrosac_check_symbol">macros.AC_CHECK_SYMBOL</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_SYMBOL(<a href="macros.html#macros.AC_CHECK_SYMBOL-symbol">symbol</a>, *, <a href="macros.html#macros.AC_CHECK_SYMBOL-define">define</a>, <a href="macros.html#macros.AC_CHECK_SYMBOL-code">code</a>, <a href="macros.html#macros.AC_CHECK_SYMBOL-file">file</a>, <a href="macros.html#macros.AC_CHECK_SYMBOL-language">language</a>, <a href="macros.html#macros.AC_CHECK_SYMBOL-requires">requires</a>)
</pre>
<p>Check if a symbol is defined.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_SYMBOL([NULL], [AC_DEFINE([HAVE_NULL], [1])], [], [[#include &lt;stddef.h&gt;]])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_SYMBOL("NULL", define = "HAVE_NULL", code = "#include &lt;stddef.h&gt;")
macros.AC_CHECK_SYMBOL("EOF", requires = ["HAVE_STDIO_H"])
</code></pre>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SYMBOL-symbol"></a>symbol</td><td style="text-align: left">Name of the symbol (e.g., <code>NULL</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SYMBOL-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>HAVE_&lt;SYMBOL&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SYMBOL-code"></a>code</td><td style="text-align: left">Custom code that includes necessary headers (optional)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SYMBOL-file"></a>file</td><td style="text-align: left">Label to a file containing custom code (optional)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SYMBOL-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_SYMBOL-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_CHECK_TYPE"></a></p>
<h2 id="macrosac_check_type"><a class="header" href="#macrosac_check_type">macros.AC_CHECK_TYPE</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_CHECK_TYPE(<a href="macros.html#macros.AC_CHECK_TYPE-type_name">type_name</a>, *, <a href="macros.html#macros.AC_CHECK_TYPE-define">define</a>, <a href="macros.html#macros.AC_CHECK_TYPE-code">code</a>, <a href="macros.html#macros.AC_CHECK_TYPE-file">file</a>, <a href="macros.html#macros.AC_CHECK_TYPE-language">language</a>, <a href="macros.html#macros.AC_CHECK_TYPE-requires">requires</a>)
</pre>
<p>Check for a type.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_CHECK_TYPE([size_t])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_CHECK_TYPE("size_t")
macros.AC_CHECK_TYPE("int64_t", define = "HAVE_INT64_T", code = "#include &lt;stdint.h&gt;")
macros.AC_CHECK_TYPE("FILE", requires = ["HAVE_STDIO_H"])
</code></pre>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_TYPE-type_name"></a>type_name</td><td style="text-align: left">Name of the type (e.g., <code>size_t</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_TYPE-define"></a>define</td><td style="text-align: left">Custom define name (defaults to <code>HAVE_&lt;TYPE&gt;</code>)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_TYPE-code"></a>code</td><td style="text-align: left">Custom code that includes necessary headers (optional, defaults to standard headers)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_TYPE-file"></a>file</td><td style="text-align: left">Label to a file containing custom code (optional)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_TYPE-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_CHECK_TYPE-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_COMPUTE_INT"></a></p>
<h2 id="macrosac_compute_int"><a class="header" href="#macrosac_compute_int">macros.AC_COMPUTE_INT</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_COMPUTE_INT(<a href="macros.html#macros.AC_COMPUTE_INT-define">define</a>, <a href="macros.html#macros.AC_COMPUTE_INT-expression">expression</a>, *, <a href="macros.html#macros.AC_COMPUTE_INT-headers">headers</a>, <a href="macros.html#macros.AC_COMPUTE_INT-language">language</a>, <a href="macros.html#macros.AC_COMPUTE_INT-requires">requires</a>)
</pre>
<p>Compute an integer value at compile time.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_COMPUTE_INT([SIZEOF_INT], [sizeof(int)])
AC_COMPUTE_INT([MAX_VALUE], [1 &lt;&lt; 16])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_COMPUTE_INT("SIZEOF_INT", "sizeof(int)")
macros.AC_COMPUTE_INT("MAX_VALUE", "1 &lt;&lt; 16")
macros.AC_COMPUTE_INT("FILE_SIZE", "sizeof(FILE)", requires = ["HAVE_STDIO_H"])
</code></pre>
<p>Cross-Compile Warning:
This macro is NOT cross-compile friendly. It requires compiling and
running code to compute the value, which doesn't work when cross-compiling.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_COMPUTE_INT-define"></a>define</td><td style="text-align: left">Define name for the result (first arg to match autoconf)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_COMPUTE_INT-expression"></a>expression</td><td style="text-align: left">C expression that evaluates to an integer (second arg)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_COMPUTE_INT-headers"></a>headers</td><td style="text-align: left">Optional list of headers to include</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_COMPUTE_INT-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_COMPUTE_INT-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_C_BIGENDIAN"></a></p>
<h2 id="macrosac_c_bigendian"><a class="header" href="#macrosac_c_bigendian">macros.AC_C_BIGENDIAN</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_C_BIGENDIAN(<a href="macros.html#macros.AC_C_BIGENDIAN-define">define</a>, <a href="macros.html#macros.AC_C_BIGENDIAN-language">language</a>, <a href="macros.html#macros.AC_C_BIGENDIAN-requires">requires</a>)
</pre>
<p>Check byte order (endianness) of the system.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_C_BIGENDIAN([AC_DEFINE([WORDS_BIGENDIAN], [1])])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_C_BIGENDIAN()
</code></pre>
<p>Note:
The define is set to 1 for big-endian, 0 for little-endian.</p>
<p>Cross-Compile Warning:
This macro is NOT cross-compile friendly. It requires compiling and
running code to determine endianness, which doesn't work when cross-compiling.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_C_BIGENDIAN-define"></a>define</td><td style="text-align: left">Define name (defaults to <code>WORDS_BIGENDIAN</code>)</td><td style="text-align: left"><code>"WORDS_BIGENDIAN"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_C_BIGENDIAN-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_C_BIGENDIAN-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_C_INLINE"></a></p>
<h2 id="macrosac_c_inline"><a class="header" href="#macrosac_c_inline">macros.AC_C_INLINE</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_C_INLINE(<a href="macros.html#macros.AC_C_INLINE-define">define</a>, <a href="macros.html#macros.AC_C_INLINE-language">language</a>, <a href="macros.html#macros.AC_C_INLINE-requires">requires</a>)
</pre>
<p>Check what inline keyword the compiler supports.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_C_INLINE
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_C_INLINE()
</code></pre>
<p>Tests inline keyword and defines it to the appropriate value.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_C_INLINE-define"></a>define</td><td style="text-align: left">Define name (defaults to <code>inline</code>)</td><td style="text-align: left"><code>"inline"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_C_INLINE-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_C_INLINE-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_C_RESTRICT"></a></p>
<h2 id="macrosac_c_restrict"><a class="header" href="#macrosac_c_restrict">macros.AC_C_RESTRICT</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_C_RESTRICT(<a href="macros.html#macros.AC_C_RESTRICT-define">define</a>, <a href="macros.html#macros.AC_C_RESTRICT-language">language</a>, <a href="macros.html#macros.AC_C_RESTRICT-requires">requires</a>)
</pre>
<p>Check if the compiler supports restrict keyword.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_C_RESTRICT
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_C_RESTRICT()
</code></pre>
<p>Note:
If restrict is not supported, the define is set to empty string.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_C_RESTRICT-define"></a>define</td><td style="text-align: left">Define name (defaults to <code>restrict</code>)</td><td style="text-align: left"><code>"restrict"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_C_RESTRICT-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_C_RESTRICT-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_DEFINE"></a></p>
<h2 id="macrosac_define"><a class="header" href="#macrosac_define">macros.AC_DEFINE</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_DEFINE(<a href="macros.html#macros.AC_DEFINE-define">define</a>, <a href="macros.html#macros.AC_DEFINE-value">value</a>, <a href="macros.html#macros.AC_DEFINE-requires">requires</a>)
</pre>
<p>Define a configuration macro unconditionally.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_DEFINE([CUSTOM_VALUE], [42])
AC_DEFINE([ENABLE_FEATURE], [1])
AC_DEFINE([PROJECT_NAME], ["MyProject"])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_DEFINE("CUSTOM_VALUE", "42")
macros.AC_DEFINE("ENABLE_FEATURE", "1")
macros.AC_DEFINE("PROJECT_NAME", '"MyProject"')
macros.AC_DEFINE("FEATURE_ENABLED", "1", requires = ["HAVE_STDIO_H"])
</code></pre>
<p>Note:
This is equivalent to GNU Autoconf's AC_DEFINE macro. It creates
a define that will always be set in the generated config.h file.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_DEFINE-define"></a>define</td><td style="text-align: left">Define name (e.g., <code>"CUSTOM_VALUE"</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.AC_DEFINE-value"></a>value</td><td style="text-align: left">Value to assign (defaults to <code>"1"</code>)</td><td style="text-align: left"><code>"1"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_DEFINE-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_PROG_CC"></a></p>
<h2 id="macrosac_prog_cc"><a class="header" href="#macrosac_prog_cc">macros.AC_PROG_CC</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_PROG_CC(<a href="macros.html#macros.AC_PROG_CC-requires">requires</a>)
</pre>
<p>Check that a C compiler is available.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_PROG_CC
AC_PROG_CC([gcc clang])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_PROG_CC()
</code></pre>
<p>Note:
This is mostly a no-op in Bazel since the toolchain must be configured,
but returns a check that will verify the compiler works.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_PROG_CC-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_PROG_CC_C_O"></a></p>
<h2 id="macrosac_prog_cc_c_o"><a class="header" href="#macrosac_prog_cc_c_o">macros.AC_PROG_CC_C_O</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_PROG_CC_C_O(<a href="macros.html#macros.AC_PROG_CC_C_O-define">define</a>, <a href="macros.html#macros.AC_PROG_CC_C_O-language">language</a>, <a href="macros.html#macros.AC_PROG_CC_C_O-requires">requires</a>)
</pre>
<p>Check if the compiler supports -c and -o flags simultaneously.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_PROG_CC_C_O
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_PROG_CC_C_O()
</code></pre>
<p>Note:
If the compiler does NOT support both flags together, the define is set.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_PROG_CC_C_O-define"></a>define</td><td style="text-align: left">Define name (defaults to <code>"NO_MINUS_C_MINUS_O"</code>)</td><td style="text-align: left"><code>"NO_MINUS_C_MINUS_O"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_PROG_CC_C_O-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_PROG_CC_C_O-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_PROG_CXX"></a></p>
<h2 id="macrosac_prog_cxx"><a class="header" href="#macrosac_prog_cxx">macros.AC_PROG_CXX</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_PROG_CXX(<a href="macros.html#macros.AC_PROG_CXX-requires">requires</a>)
</pre>
<p>Check that a C++ compiler is available.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_PROG_CXX
AC_PROG_CXX([g++ clang++])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_PROG_CXX()
</code></pre>
<p>Note:
This is mostly a no-op in Bazel since the toolchain must be configured,
but returns a check that will verify the compiler works.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_PROG_CXX-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.AC_TRY_COMPILE"></a></p>
<h2 id="macrosac_try_compile"><a class="header" href="#macrosac_try_compile">macros.AC_TRY_COMPILE</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.AC_TRY_COMPILE(*, <a href="macros.html#macros.AC_TRY_COMPILE-code">code</a>, <a href="macros.html#macros.AC_TRY_COMPILE-file">file</a>, <a href="macros.html#macros.AC_TRY_COMPILE-define">define</a>, <a href="macros.html#macros.AC_TRY_COMPILE-language">language</a>, <a href="macros.html#macros.AC_TRY_COMPILE-requires">requires</a>)
</pre>
<p>Try to compile custom code.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">AC_TRY_COMPILE([#include &lt;stdio.h&gt;], [printf("test");], [AC_DEFINE([HAVE_PRINTF], [1])])
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.AC_TRY_COMPILE(code = "#include &lt;stdio.h&gt;\nint main() { printf(\"test\"); return 0; }", define = "HAVE_PRINTF")
macros.AC_TRY_COMPILE(file = ":test.c", define = "CUSTOM_CHECK")
macros.AC_TRY_COMPILE(code = "#include &lt;stdlib.h&gt;", define = "HAVE_STDLIB", requires = ["HAVE_STDIO_H"])
</code></pre>
<p>Note:
This is a rules_cc_autoconf extension. While GNU Autoconf has an
obsolete AC_TRY_COMPILE macro (replaced by AC_COMPILE_IFELSE), this
version adds support for file-based checks which is useful in Bazel.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.AC_TRY_COMPILE-code"></a>code</td><td style="text-align: left">Code to compile (optional if file is provided)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_TRY_COMPILE-file"></a>file</td><td style="text-align: left">Label to a file containing code to compile (optional if code is provided)</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_TRY_COMPILE-define"></a>define</td><td style="text-align: left">Define name to set if compilation succeeds</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_TRY_COMPILE-language"></a>language</td><td style="text-align: left">Language to use for check (<code>"c"</code> or <code>"cpp"</code>)</td><td style="text-align: left"><code>"c"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.AC_TRY_COMPILE-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the autoconf rule.</p>
<p><a id="macros.M4_DEFINE"></a></p>
<h2 id="macrosm4_define"><a class="header" href="#macrosm4_define">macros.M4_DEFINE</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")

macros.M4_DEFINE(<a href="macros.html#macros.M4_DEFINE-define">define</a>, <a href="macros.html#macros.M4_DEFINE-value">value</a>, <a href="macros.html#macros.M4_DEFINE-requires">requires</a>)
</pre>
<p>Define a configuration M4 variable unconditionally.</p>
<p>Original m4 example:</p>
<pre><code class="language-m4">REPLACE_FOO=1
</code></pre>
<p>Example:</p>
<pre><code class="language-python">macros.M4_DEFINE("REPLACE_FOO", "1")
</code></pre>
<p>Note:
Currently this is not functionally different than <code>AC_DEFINE</code> but is useful in
tracking the difference in actual <code>AC_DEFINE</code> values and variables used later
in the M4 macro.</p>
<p><strong>PARAMETERS</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Default Value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="macros.M4_DEFINE-define"></a>define</td><td style="text-align: left">Define name (e.g., <code>"CUSTOM_VALUE"</code>)</td><td style="text-align: left">none</td></tr>
<tr><td style="text-align: left"><a id="macros.M4_DEFINE-value"></a>value</td><td style="text-align: left">Value to assign (defaults to <code>"1"</code>)</td><td style="text-align: left"><code>"1"</code></td></tr>
<tr><td style="text-align: left"><a id="macros.M4_DEFINE-requires"></a>requires</td><td style="text-align: left">List of requirements that must be met before this check runs. Can be simple define names (e.g., <code>"HAVE_FOO"</code>) or value-based requirements (e.g., <code>"REPLACE_FSTAT=1"</code> to require specific value)</td><td style="text-align: left"><code>None</code></td></tr>
</tbody></table>
</div>
<p><strong>RETURNS</strong></p>
<p>A JSON-encoded check string for use with the m4 rule.</p>
<div style="break-before: page; page-break-before: always;"></div><!-- Generated with Stardoc: http://skydoc.bazel.build -->
<h1 id="package_info"><a class="header" href="#package_info">package_info</a></h1>
<h2 id="rules-4"><a class="header" href="#rules-4">Rules</a></h2>
<ul>
<li><a href="package_info.html#package_info">package_info</a></li>
</ul>
<p><a id="package_info"></a></p>
<h2 id="package_info-1"><a class="header" href="#package_info-1">package_info</a></h2>
<pre>
load("@rules_cc_autoconf//autoconf:package_info.bzl", "package_info")

package_info(<a href="package_info.html#package_info-name">name</a>, <a href="package_info.html#package_info-module_bazel">module_bazel</a>, <a href="package_info.html#package_info-package_bugreport">package_bugreport</a>, <a href="package_info.html#package_info-package_name">package_name</a>, <a href="package_info.html#package_info-package_url">package_url</a>, <a href="package_info.html#package_info-package_version">package_version</a>)
</pre>
<p>A rule for parsing module info from <code>MODULE.bazel</code> files.</p>
<p>This rule is most useful when paired with the <code>autoconf</code> rule.</p>
<p>Example:</p>
<pre><code class="language-python">load("@rules_cc_autoconf//autoconf:autoconf.bzl", "autoconf")
load("@rules_cc_autoconf//autoconf:package_info.bzl", "package_info")

package_info(
    name = "package_info",
    module_bazel = "//:MODULE.bazel",
)

autoconf(
    name = "config_h",
    out = "config.h",
    checks = [
        # ...
    ],
    deps = [
        ":package_info",
    ],
)
</code></pre>
<p><strong>ATTRIBUTES</strong></p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Name</th><th style="text-align: left">Description</th><th style="text-align: left">Type</th><th style="text-align: left">Mandatory</th><th style="text-align: left">Default</th></tr></thead><tbody>
<tr><td style="text-align: left"><a id="package_info-name"></a>name</td><td style="text-align: left">A unique name for this target.</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels#target-names">Name</a></td><td style="text-align: left">required</td><td style="text-align: left"></td></tr>
<tr><td style="text-align: left"><a id="package_info-module_bazel"></a>module_bazel</td><td style="text-align: left">A <code>MODULE.bazel</code> file to parse module information from. Mutually exclusive with <code>package_name</code> and <code>package_version</code>.</td><td style="text-align: left"><a href="https://bazel.build/concepts/labels">Label</a></td><td style="text-align: left">optional</td><td style="text-align: left"><code>None</code></td></tr>
<tr><td style="text-align: left"><a id="package_info-package_bugreport"></a>package_bugreport</td><td style="text-align: left">The package bug report email/URL. Used to populate <code>PACKAGE_BUGREPORT</code> define.</td><td style="text-align: left">String</td><td style="text-align: left">optional</td><td style="text-align: left"><code>""</code></td></tr>
<tr><td style="text-align: left"><a id="package_info-package_name"></a>package_name</td><td style="text-align: left">The package name. Must be provided together with <code>package_version</code> if <code>module_bazel</code> is not provided.</td><td style="text-align: left">String</td><td style="text-align: left">optional</td><td style="text-align: left"><code>""</code></td></tr>
<tr><td style="text-align: left"><a id="package_info-package_url"></a>package_url</td><td style="text-align: left">The package home page URL. Used to populate <code>PACKAGE_URL</code> define.</td><td style="text-align: left">String</td><td style="text-align: left">optional</td><td style="text-align: left"><code>""</code></td></tr>
<tr><td style="text-align: left"><a id="package_info-package_version"></a>package_version</td><td style="text-align: left">The package version. Must be provided together with <code>package_name</code> if <code>module_bazel</code> is not provided.</td><td style="text-align: left">String</td><td style="text-align: left">optional</td><td style="text-align: left"><code>""</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="migrating-from-m4-macros"><a class="header" href="#migrating-from-m4-macros">Migrating from M4 macros</a></h1>
<p>GNU Autoconf uses M4 macros in <code>configure.ac</code> files to generate configuration
checks. This module provides equivalent Starlark functions that produce the same
results but are integrated with Bazel's build system.</p>
<h2 id="key-differences"><a class="header" href="#key-differences">Key Differences</a></h2>
<ol>
<li><strong>Syntax</strong>: M4 uses square brackets <code>[]</code> for arguments; Starlark uses parentheses <code>()</code> and quotes <code>""</code></li>
<li><strong>Multiple items</strong>: M4 macros like <code>AC_CHECK_HEADERS([h1 h2 h3])</code> become multiple separate calls</li>
<li><strong>Action blocks</strong>: M4 uses action blocks <code>[action-if-found]</code> and <code>[action-if-not-found]</code>; Bazel auto-generates defines</li>
<li><strong>Language selection</strong>: M4 uses <code>AC_LANG_PUSH([C++])</code>; Bazel uses <code>language = "cpp"</code> parameter</li>
<li><strong>Custom code</strong>: M4 uses <code>AC_LANG_PROGRAM([includes], [body])</code>; Bazel uses <code>code</code> or <code>file</code> parameters</li>
<li><strong>Dependencies</strong>: M4 uses nested macro calls; Bazel uses explicit <code>requires</code> parameter</li>
</ol>
<h2 id="migration-patterns"><a class="header" href="#migration-patterns">Migration Patterns</a></h2>
<h3 id="pattern-1-simple-headerfunctiontype-checks"><a class="header" href="#pattern-1-simple-headerfunctiontype-checks">Pattern 1: Simple Header/Function/Type Checks</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_CHECK_HEADER([stdio.h])
AC_CHECK_FUNC([malloc])
AC_CHECK_TYPE([size_t])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_HEADER("stdio.h")
macros.AC_CHECK_FUNC("malloc")
macros.AC_CHECK_TYPE("size_t")
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Remove square brackets, add quotes</li>
<li>Convert to function call: <code>macros.MACRO_NAME("argument")</code></li>
<li>Define names are auto-generated (e.g., <code>HAVE_STDIO_H</code>, <code>HAVE_MALLOC</code>, <code>HAVE_SIZE_T</code>)</li>
</ul>
<h3 id="pattern-2-multiple-items-in-one-call"><a class="header" href="#pattern-2-multiple-items-in-one-call">Pattern 2: Multiple Items in One Call</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_CHECK_HEADERS([stdio.h stdlib.h string.h])
AC_CHECK_FUNCS([malloc free printf])
AC_CHECK_TYPES([int8_t int64_t])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_HEADER("stdio.h")
macros.AC_CHECK_HEADER("stdlib.h")
macros.AC_CHECK_HEADER("string.h")
macros.AC_CHECK_FUNC("malloc")
macros.AC_CHECK_FUNC("free")
macros.AC_CHECK_FUNC("printf")
macros.AC_CHECK_TYPE("int8_t")
macros.AC_CHECK_TYPE("int64_t")
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Split space-separated lists into individual macro calls</li>
<li>Each item becomes a separate function call</li>
</ul>
<h3 id="pattern-3-custom-define-names"><a class="header" href="#pattern-3-custom-define-names">Pattern 3: Custom Define Names</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_CHECK_HEADER([sys/stat.h], [AC_DEFINE([HAVE_SYS_STAT_H], [1])])
AC_CHECK_FUNC([printf], [AC_DEFINE([HAVE_PRINTF], [1])])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_HEADER("sys/stat.h", define = "HAVE_SYS_STAT_H")
macros.AC_CHECK_FUNC("printf", define = "HAVE_PRINTF")
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Extract define name from <code>AC_DEFINE</code> in action block</li>
<li>Use <code>define</code> parameter to override auto-generated name</li>
<li>If no custom define, omit the parameter (auto-generation handles it)</li>
</ul>
<h3 id="pattern-4-headers-for-typesymbol-checks"><a class="header" href="#pattern-4-headers-for-typesymbol-checks">Pattern 4: Headers for Type/Symbol Checks</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_CHECK_TYPE([int64_t], [], [], [[#include &lt;stdint.h&gt;]])
AC_CHECK_SYMBOL([NULL], [], [], [[#include &lt;stddef.h&gt;]])
AC_CHECK_TYPES([int8_t, int64_t], [], [], [[#include &lt;stdint.h&gt;]])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_TYPE("int64_t", code = "#include &lt;stdint.h&gt;")
macros.AC_CHECK_SYMBOL("NULL", code = "#include &lt;stddef.h&gt;")
macros.AC_CHECK_TYPE("int8_t", code = "#include &lt;stdint.h&gt;")
macros.AC_CHECK_TYPE("int64_t", code = "#include &lt;stdint.h&gt;")
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Extract include directives from the 4th argument (includes parameter)</li>
<li>Use <code>code</code> parameter with the include statement</li>
<li>For <code>AC_CHECK_TYPES</code> with multiple types, split and repeat the code for each</li>
</ul>
<p><strong>Note on Implicit Defines:</strong></p>
<p>In GNU autoconf, <code>AC_CHECK_TYPES</code> may implicitly define <code>HAVE_*</code> values for headers
it checks. For example, when checking types that require <code>&lt;stdint.h&gt;</code>, autoconf may
also check for <code>&lt;inttypes.h&gt;</code> and define <code>HAVE_INTTYPES_H</code>. Similarly, <code>STDC_HEADERS</code>
is typically defined by <code>AC_HEADER_STDC</code> which checks for standard C89 headers.</p>
<p>In rules_cc_autoconf, these implicit checks are not performed automatically. If your
template file (e.g., <code>config.h.in</code>) contains <code>#undef</code> statements for these defines,
you must explicitly add the corresponding checks to your BUILD file:</p>
<pre><code class="language-python"># If checking types that require stdint.h, also check for inttypes.h
macros.AC_CHECK_HEADER("inttypes.h")

# If STDC_HEADERS is in your template, define it explicitly
macros.AC_DEFINE("STDC_HEADERS", "1")
</code></pre>
<h3 id="pattern-5-custom-compilation-tests"><a class="header" href="#pattern-5-custom-compilation-tests">Pattern 5: Custom Compilation Tests</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[
#include &lt;stdatomic.h&gt;
]], [[
atomic_int x = 0;
(void)x;
return 0;
]])], [AC_DEFINE([HAVE_STDATOMIC], [1])], [])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_TRY_COMPILE(
    code = """\
#include &lt;stdatomic.h&gt;
int main(void) { atomic_int x = 0; (void)x; return 0; }
""",
    define = "HAVE_STDATOMIC",
)
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li><code>AC_COMPILE_IFELSE</code> → <code>macros.AC_TRY_COMPILE</code></li>
<li>Combine <code>AC_LANG_PROGRAM</code> includes and body into single <code>code</code> string</li>
<li>Extract define from action block</li>
<li>Add <code>int main(void) { ... }</code> wrapper if not present</li>
<li>Use <code>\n</code> for line breaks in code string</li>
</ul>
<h3 id="pattern-6-language-selection"><a class="header" href="#pattern-6-language-selection">Pattern 6: Language Selection</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_LANG_PUSH([C++])
AC_CHECK_HEADER([iostream])
AC_LANG_POP([C++])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_HEADER("iostream", language = "cpp")
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li><code>AC_LANG_PUSH([C++])</code> / <code>AC_LANG_POP([C++])</code> → add <code>language = "cpp"</code> to all macros in between</li>
<li><code>AC_LANG_PUSH([C])</code> is the default, so usually no parameter needed</li>
<li>Apply <code>language = "cpp"</code> to all macros between <code>AC_LANG_PUSH([C++])</code> and <code>AC_LANG_POP([C++])</code></li>
</ul>
<h3 id="pattern-7-library-checks"><a class="header" href="#pattern-7-library-checks">Pattern 7: Library Checks</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_CHECK_LIB([m], [cos])
AC_CHECK_LIB([pthread], [pthread_create])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_LIB("m", "cos")
macros.AC_CHECK_LIB("pthread", "pthread_create")
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>First argument is library name (without <code>-l</code> prefix)</li>
<li>Second argument is function name to check</li>
<li>Define auto-generated as <code>HAVE_LIB&lt;LIBRARY&gt;</code> (e.g., <code>HAVE_LIBM</code>)</li>
</ul>
<h3 id="pattern-8-compiler-flag-checks"><a class="header" href="#pattern-8-compiler-flag-checks">Pattern 8: Compiler Flag Checks</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_MSG_CHECKING([whether $CC accepts -Wall])
save_CFLAGS="$CFLAGS"
CFLAGS="$CFLAGS -Wall"
AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[]], [[]])],
  [AC_MSG_RESULT([yes])
   AC_DEFINE([HAVE_FLAG_WALL], [1])],
  [AC_MSG_RESULT([no])])
CFLAGS="$save_CFLAGS"
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_C_COMPILER_FLAG("-Wall", define = "HAVE_FLAG_WALL")
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Pattern of <code>AC_MSG_CHECKING</code> + flag manipulation + <code>AC_COMPILE_IFELSE</code> → <code>AC_CHECK_C_COMPILER_FLAG</code></li>
<li>Extract flag from <code>CFLAGS</code> or <code>CXXFLAGS</code> assignment</li>
<li>Extract define from action block</li>
<li>Use <code>AC_CHECK_C_COMPILER_FLAG</code> for C, <code>AC_CHECK_CXX_COMPILER_FLAG</code> for C++</li>
</ul>
<h3 id="pattern-9-size-and-alignment-checks"><a class="header" href="#pattern-9-size-and-alignment-checks">Pattern 9: Size and Alignment Checks</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_CHECK_SIZEOF([int])
AC_CHECK_SIZEOF([size_t], [], [[#include &lt;stddef.h&gt;]])
AC_CHECK_ALIGNOF([double])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_SIZEOF("int")
macros.AC_CHECK_SIZEOF("size_t", headers = ["stddef.h"])
macros.AC_CHECK_ALIGNOF("double")
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Direct translation with type name</li>
<li>If includes provided, use <code>headers</code> parameter (list of header names without <code>&lt;&gt;</code> or quotes)</li>
<li>Define auto-generated as <code>SIZEOF_&lt;TYPE&gt;</code> or <code>ALIGNOF_&lt;TYPE&gt;</code></li>
</ul>
<h3 id="pattern-10-unconditional-defines-ac_define"><a class="header" href="#pattern-10-unconditional-defines-ac_define">Pattern 10: Unconditional Defines (AC_DEFINE)</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_DEFINE([CUSTOM_VALUE], [42])
AC_DEFINE([ENABLE_FEATURE], [1])
AC_DEFINE([PROJECT_NAME], ["MyProject"])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_DEFINE("CUSTOM_VALUE", "42")
macros.AC_DEFINE("ENABLE_FEATURE", "1")
macros.AC_DEFINE("PROJECT_NAME", '"MyProject"')
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Direct translation</li>
<li>Second argument becomes <code>value</code> parameter</li>
<li>Preserve quotes in string values (use <code>'"string"'</code> for string literals)</li>
</ul>
<h3 id="pattern-10b-m4-shell-variables-m4_define"><a class="header" href="#pattern-10b-m4-shell-variables-m4_define">Pattern 10b: M4 Shell Variables (M4_DEFINE)</a></h3>
<p>Many M4 macros use shell variables like <code>REPLACE_*</code> or <code>HAVE_*</code> that are set via
assignment (not <code>AC_DEFINE</code>). These are tracked separately using <code>M4_DEFINE</code>.</p>
<p><strong>M4:</strong></p>
<pre><code class="language-m4"># These are shell variable assignments, NOT AC_DEFINE calls
REPLACE_FSTAT=1
HAVE_WORKING_MKTIME=0
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python"># Use M4_DEFINE for shell variables
macros.M4_DEFINE("REPLACE_FSTAT", "1")
macros.M4_DEFINE("HAVE_WORKING_MKTIME", "0")
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Use <code>macros.M4_DEFINE</code> for M4 shell variable assignments (e.g., <code>REPLACE_*=1</code>)</li>
<li>Use <code>macros.AC_DEFINE</code> only for actual <code>AC_DEFINE()</code> calls in the M4 source</li>
<li>Both produce the same result, but <code>M4_DEFINE</code> helps track the semantic difference</li>
</ul>
<h3 id="pattern-11-conditional-dependencies"><a class="header" href="#pattern-11-conditional-dependencies">Pattern 11: Conditional Dependencies</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_CHECK_HEADER([stdio.h])
AC_CHECK_FUNC([fopen], [], [], [[#include &lt;stdio.h&gt;]])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_HEADER("stdio.h")
macros.AC_CHECK_FUNC("fopen", requires = ["HAVE_STDIO_H"])
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>If a check includes a header that was previously checked, add <code>requires</code> parameter</li>
<li>Use the auto-generated define name from the previous check</li>
<li>Extract include dependencies and map to corresponding <code>HAVE_*</code> defines</li>
</ul>
<h3 id="pattern-11b-value-based-requirements"><a class="header" href="#pattern-11b-value-based-requirements">Pattern 11b: Value-Based Requirements</a></h3>
<p>Sometimes a check should only run if a previous check resulted in a specific value.
Use <code>"DEFINE=value"</code> syntax in the <code>requires</code> list.</p>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">if test $REPLACE_FSTAT = 1; then
  # Only run this check if fstat needs replacement
  AC_CHECK_FUNC([fstat64])
fi
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_FUNC(
    "fstat64",
    requires = ["REPLACE_FSTAT=1"],  # Only if REPLACE_FSTAT equals "1"
)
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li><code>requires = ["FOO"]</code> - check succeeds if FOO succeeded (any value)</li>
<li><code>requires = ["FOO=1"]</code> - check succeeds if FOO succeeded AND has value "1"</li>
<li>Useful for conditional checks based on platform detection results</li>
</ul>
<h3 id="pattern-12-member-checks"><a class="header" href="#pattern-12-member-checks">Pattern 12: Member Checks</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_CHECK_MEMBER([struct stat.st_rdev], [AC_DEFINE([HAVE_STRUCT_STAT_ST_RDEV], [1])], [], [[#include &lt;sys/stat.h&gt;]])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_MEMBER("struct stat", "st_rdev", headers = ["sys/stat.h"])
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Split <code>struct/union.member</code> into two arguments: aggregate and member</li>
<li>Extract includes to <code>headers</code> parameter</li>
<li>Define auto-generated as <code>HAVE_&lt;AGGREGATE&gt;_&lt;MEMBER&gt;</code></li>
</ul>
<h3 id="pattern-13-declaration-checks"><a class="header" href="#pattern-13-declaration-checks">Pattern 13: Declaration Checks</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_CHECK_DECL([NULL], [AC_DEFINE([HAVE_DECL_NULL], [1])], [], [[#include &lt;stddef.h&gt;]])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_DECL("NULL", headers = ["stddef.h"])
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Similar to <code>AC_CHECK_SYMBOL</code> but checks for declarations (not just definitions)</li>
<li>Use <code>headers</code> parameter for includes</li>
<li>Define auto-generated as <code>HAVE_DECL_&lt;SYMBOL&gt;</code></li>
</ul>
<h3 id="pattern-13b-conditional-declaration-checks-with-function-pre-checks"><a class="header" href="#pattern-13b-conditional-declaration-checks-with-function-pre-checks">Pattern 13b: Conditional Declaration Checks with Function Pre-checks</a></h3>
<p>Sometimes you need to check if a function exists first, then check if it's declared in a specific header. The original M4 code uses shell conditionals to chain these checks.</p>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">if test "$ac_cv_func_ether_hostton" = yes; then
    #
    # OK, we have ether_hostton().  Is it declared in &lt;net/ethernet.h&gt;?
    #
    # This test fails if we don't have &lt;net/ethernet.h&gt; or if we do
    # but it doesn't declare ether_hostton().
    #
    AC_CHECK_DECL(ether_hostton,
        [
            AC_DEFINE(NET_ETHERNET_H_DECLARES_ETHER_HOSTTON,,
                [Define to 1 if net/ethernet.h declares `ether_hostton'])
        ],,
        [
#include &lt;net/ethernet.h&gt;
        ])
fi
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">macros.AC_CHECK_FUNC("ether_hostton"),
macros.AC_CHECK_DECL(
    "ether_hostton",
    define = "NET_ETHERNET_H_DECLARES_ETHER_HOSTTON_TEST",
    headers = ["net/ethernet.h"],
    requires = ["HAVE_ETHER_HOSTTON=1"],
),
macros.AC_DEFINE(
    "NET_ETHERNET_H_DECLARES_ETHER_HOSTTON",
    requires = ["NET_ETHERNET_H_DECLARES_ETHER_HOSTTON_TEST=1"],
),
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>First check if the function exists with <code>AC_CHECK_FUNC</code></li>
<li>Then check if it's declared in the header with <code>AC_CHECK_DECL</code>, using a temporary define name (e.g., <code>*_TEST</code>)</li>
<li>Use <code>requires = ["HAVE_ETHER_HOSTTON=1"]</code> on the <code>AC_CHECK_DECL</code> to ensure it only runs if the function check succeeded</li>
<li>Finally, use <code>AC_DEFINE</code> with <code>requires = ["*_TEST=1"]</code> to conditionally define the final macro only if the declaration check passed</li>
<li>The <code>requires</code> chains ensure defines are not created unless they're supposed to, matching the original M4 shell conditional behavior</li>
</ul>
<h3 id="pattern-14-platform-specific-conditionals"><a class="header" href="#pattern-14-platform-specific-conditionals">Pattern 14: Platform-Specific Conditionals</a></h3>
<p>Many M4 files use <code>case "$host_os"</code> to conditionally set variables based on the
target platform. In Bazel, these should be translated to <code>select()</code> statements.</p>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_REQUIRE([AC_CANONICAL_HOST])
case "$host_os" in
  mingw* | windows*)
    REPLACE_ACCESS=1
    ;;
  *)
    # Other platform checks...
    ;;
esac
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">autoconf(
    name = "access",
    checks = select({
        "@platforms//os:windows": [
            # On Windows, unconditionally set REPLACE_ACCESS=1
            # Use M4_DEFINE for M4 shell variables (not AC_DEFINE values)
            macros.M4_DEFINE("REPLACE_ACCESS", "1"),
        ],
        "//conditions:default": [
            # Non-Windows checks
            macros.AC_CHECK_FUNC("access"),
        ],
    }),
    visibility = ["//visibility:public"],
    deps = [...],
)
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li>Use <code>macros.M4_DEFINE</code> for M4 shell variables (e.g., <code>REPLACE_*</code>, <code>HAVE_*</code> set via assignment)</li>
<li>Use <code>macros.AC_DEFINE</code> only for actual <code>AC_DEFINE()</code> calls in the M4 source</li>
<li><code>case "$host_os" in mingw* | windows*)</code> → <code>select({"@platforms//os:windows": [...]})</code></li>
<li><code>case "$host_os" in darwin*)</code> → <code>select({"@platforms//os:macos": [...]})</code></li>
<li><code>case "$host_os" in linux*)</code> → <code>select({"@platforms//os:linux": [...]})</code></li>
<li>Default case (<code>*</code>) → <code>"//conditions:default": [...]</code></li>
<li>Multiple platform conditions can be combined in a single <code>select()</code></li>
<li>Checks inside the <code>select()</code> must be lists that can be concatenated with <code>+</code></li>
</ul>
<p><strong>Common Platform Constraint Labels:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>M4 Pattern</th><th>Bazel Constraint</th></tr></thead><tbody>
<tr><td><code>mingw*</code>, <code>windows*</code></td><td><code>@platforms//os:windows</code></td></tr>
<tr><td><code>darwin*</code></td><td><code>@platforms//os:macos</code></td></tr>
<tr><td><code>linux*</code>, <code>linux-*</code></td><td><code>@platforms//os:linux</code></td></tr>
<tr><td><code>freebsd*</code></td><td><code>@platforms//os:freebsd</code></td></tr>
<tr><td><code>openbsd*</code></td><td><code>@platforms//os:openbsd</code></td></tr>
<tr><td><code>netbsd*</code></td><td><code>@platforms//os:netbsd</code></td></tr>
<tr><td><code>solaris*</code></td><td>(use custom constraint or <code>//conditions:default</code>)</td></tr>
<tr><td><code>cygwin*</code></td><td>(use custom constraint or <code>//conditions:default</code>)</td></tr>
</tbody></table>
</div>
<p><strong>Example with Multiple Platforms:</strong></p>
<pre><code class="language-python">autoconf(
    name = "fstat",
    checks = select({
        "@platforms//os:windows": [
            # Windows: stat returns timezone-affected timestamps
            macros.M4_DEFINE("REPLACE_FSTAT", "1"),
        ],
        "@platforms//os:macos": [
            # macOS: stat can return negative tv_nsec
            macros.M4_DEFINE("REPLACE_FSTAT", "1"),
        ],
        "//conditions:default": [
            # Other platforms: no replacement needed
        ],
    }),
    visibility = ["//visibility:public"],
)
</code></pre>
<p><strong>Combining Platform Checks with Common Checks:</strong></p>
<p>When you need both platform-specific and common checks, concatenate them with <code>+</code>:</p>
<pre><code class="language-python">autoconf(
    name = "open",
    checks = [
        # Common checks for all platforms
        macros.AC_CHECK_FUNC("open"),
    ] + select({
        "@platforms//os:windows": [
            # Windows-specific: unconditionally replace open()
            macros.M4_DEFINE("REPLACE_OPEN", "1"),
        ],
        "//conditions:default": [],
    }),
    visibility = ["//visibility:public"],
    deps = [...],
)
</code></pre>
<h2 id="special-cases"><a class="header" href="#special-cases">Special Cases</a></h2>
<h3 id="ac_init-and-ac_config_headers"><a class="header" href="#ac_init-and-ac_config_headers">AC_INIT and AC_CONFIG_HEADERS</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_INIT([package_name], [1.0.0])
AC_CONFIG_HEADERS([config.h])
</code></pre>
<p><strong>Bazel:</strong></p>
<pre><code class="language-python">package_info(
    name = "package",
    package_name = "package_name",
    package_version = "1.0.0",
)

autoconf_hdr(
    name = "config",
    out = "config.h",
    template = "config.h.in",
    deps = [":autoconf"],
)
</code></pre>
<p><strong>Rules:</strong></p>
<ul>
<li><code>AC_INIT</code> → <code>package_info</code> rule (separate from macros)</li>
<li><code>AC_CONFIG_HEADERS</code> → <code>autoconf_hdr</code> rule (separate from macros)</li>
</ul>
<h3 id="ac_output"><a class="header" href="#ac_output">AC_OUTPUT</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_OUTPUT
</code></pre>
<p><strong>Bazel:</strong></p>
<ul>
<li>No equivalent - handled by Bazel build system automatically</li>
</ul>
<h3 id="ac_msg_checking--ac_msg_result"><a class="header" href="#ac_msg_checking--ac_msg_result">AC_MSG_CHECKING / AC_MSG_RESULT</a></h3>
<p><strong>M4:</strong></p>
<pre><code class="language-m4">AC_MSG_CHECKING([for something])
AC_MSG_RESULT([yes])
</code></pre>
<p><strong>Bazel:</strong></p>
<ul>
<li>No equivalent - informational only, not needed in Bazel</li>
</ul>
<h2 id="complete-example-migration"><a class="header" href="#complete-example-migration">Complete Example Migration</a></h2>
<p><strong>M4 (configure.ac):</strong></p>
<pre><code class="language-m4">AC_INIT([myproject], [1.0.0])
AC_CONFIG_HEADERS([config.h])

AC_PROG_CC
AC_CHECK_HEADERS([stdio.h stdlib.h])
AC_CHECK_FUNCS([malloc printf])
AC_CHECK_TYPE([int64_t], [], [], [[#include &lt;stdint.h&gt;]])
AC_CHECK_LIB([m], [cos])
AC_DEFINE([MY_FEATURE], [1])
AC_OUTPUT
</code></pre>
<p><strong>Bazel (BUILD.bazel):</strong></p>
<pre><code class="language-python">load("@rules_cc_autoconf//autoconf:autoconf.bzl", "autoconf")
load("@rules_cc_autoconf//autoconf:autoconf_hdr.bzl", "autoconf_hdr")
load("@rules_cc_autoconf//autoconf:macros.bzl", "macros")
load("@rules_cc_autoconf//autoconf:package_info.bzl", "package_info")

package_info(
    name = "package",
    package_name = "myproject",
    package_version = "1.0.0",
)

autoconf(
    name = "autoconf",
    checks = [
        macros.AC_PROG_CC(),
        macros.AC_CHECK_HEADER("stdio.h"),
        macros.AC_CHECK_HEADER("stdlib.h"),
        macros.AC_CHECK_FUNC("malloc"),
        macros.AC_CHECK_FUNC("printf"),
        macros.AC_CHECK_TYPE("int64_t", code = "#include &lt;stdint.h&gt;"),
        macros.AC_CHECK_LIB("m", "cos"),
        macros.AC_DEFINE("MY_FEATURE", "1"),
    ],
    deps = [":package"],
)

autoconf_hdr(
    name = "config",
    out = "config.h",
    template = "config.h.in",
    deps = [":autoconf"],
)
</code></pre>
<h2 id="migration-checklist"><a class="header" href="#migration-checklist">Migration Checklist</a></h2>
<p>When migrating, follow these steps:</p>
<ol>
<li>Identify all M4 macro calls in <code>configure.ac</code></li>
<li>Map each macro to its Bazel equivalent (see function docstrings)</li>
<li>Convert argument syntax (brackets → quotes, lists → multiple calls)</li>
<li>Extract define names from action blocks</li>
<li>Convert include directives to <code>code</code> or <code>headers</code> parameters</li>
<li>Handle language selection (<code>AC_LANG_PUSH/POP</code> → <code>language</code> parameter)</li>
<li>Identify dependencies and add <code>requires</code> parameters</li>
<li>Split multi-item macros into individual calls</li>
<li><strong>Handle platform-specific conditionals</strong> (<code>case "$host_os"</code> → <code>select()</code>)</li>
<li>Create <code>package_info</code> from <code>AC_INIT</code></li>
<li>Create <code>autoconf_hdr</code> from <code>AC_CONFIG_HEADERS</code></li>
<li>Wrap all checks in <code>autoconf()</code> rule with <code>checks</code> list</li>
<li>Verify no duplicate checks between direct checks and dependencies</li>
<li>Preserve comments and structure where possible</li>
</ol>
<h2 id="common-pitfalls"><a class="header" href="#common-pitfalls">Common Pitfalls</a></h2>
<ul>
<li><strong>Forgetting to split lists</strong>: <code>AC_CHECK_HEADERS([a b c])</code> needs 3 separate calls</li>
<li><strong>Missing main() wrapper</strong>: Custom code in <code>AC_TRY_COMPILE</code> needs <code>int main(void) { ... }</code></li>
<li><strong>Wrong define names</strong>: Auto-generated names follow patterns (see each macro's docstring)</li>
<li><strong>Language context</strong>: Remember to propagate <code>language = "cpp"</code> from <code>AC_LANG_PUSH([C++])</code></li>
<li><strong>Dependencies</strong>: Check if includes in code correspond to previous header checks</li>
<li><strong>String values</strong>: Use <code>'"string"'</code> for string literals in <code>AC_DEFINE</code> values</li>
<li><strong>Platform conditionals</strong>: <code>case "$host_os"</code> patterns require <code>select()</code> with platform constraints</li>
<li><strong>Duplicate checks</strong>: Don't add a check (e.g., <code>AC_CHECK_FUNC("lstat")</code>) if you already depend on a module that provides it (e.g., <code>//gnulib/m4/lstat</code>). This will cause a "duplicate check" error.</li>
</ul>
<h2 id="macro-reference"><a class="header" href="#macro-reference">Macro Reference</a></h2>
<p>For detailed information about each macro's parameters, default behavior, and examples,
see the <a href="./macros.html">macros documentation</a>. Each function includes:</p>
<ul>
<li>Original M4 example</li>
<li>Bazel usage example</li>
<li>Parameter descriptions</li>
<li>Default define name generation rules</li>
</ul>
<h2 id="cross-compilation-warning"><a class="header" href="#cross-compilation-warning">Cross-Compilation Warning</a></h2>
<p>Some of the macros in this module behave like their GNU Autoconf counterparts
and are <strong>not cross‑compile friendly</strong>. In particular, any macro that needs to
<em>run</em> a compiled test binary will not behave well when the Bazel execution
platform differs from the target platform.</p>
<p>Macros that <strong>run</strong> test programs (and therefore are not safe for
cross‑compilation) include:</p>
<ul>
<li><code>AC_CHECK_SIZEOF</code> / <code>ac_check_sizeof</code> (computes <code>sizeof(...)</code> by running code)</li>
<li><code>AC_CHECK_ALIGNOF</code> / <code>ac_check_alignof</code> (computes alignment by running code)</li>
<li><code>AC_COMPUTE_INT</code> / <code>ac_compute_int</code> (evaluates an expression by running code)</li>
<li><code>AC_C_BIGENDIAN</code> / <code>ac_c_bigendian</code> (detects endianness at runtime)</li>
<li><code>AC_PROG_CC_C_O</code> / <code>ac_prog_cc_c_o</code> (probes compiler behaviour)</li>
</ul>
<p>These are still useful when you build and test on the <strong>same</strong> architecture as
your deployment target (e.g. local development, non‑cross CI), but you should
avoid or gate them when doing true cross‑compilation.</p>
<p>For cross‑compile scenarios prefer <strong>compile‑only</strong> checks such as:</p>
<ul>
<li><code>AC_CHECK_HEADER</code>, <code>AC_CHECK_FUNC</code>, <code>AC_CHECK_LIB</code>, <code>AC_CHECK_TYPE</code>, <code>AC_CHECK_SYMBOL</code></li>
<li>the various compiler‑flag checks (<code>AC_CHECK_C_COMPILER_FLAG</code>,
<code>AC_CHECK_CXX_COMPILER_FLAG</code>)</li>
<li>unconditional defines via <code>AC_DEFINE</code></li>
</ul>
<p>You can also conditionally enable the runtime‑based macros using Bazel
<code>select()</code>s, platforms, or build flags so they only run where they are safe.</p>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="gnulib_settings"><a class="header" href="#gnulib_settings">gnulib_settings</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
